@using Microsoft.AspNetCore.Identity
@inject SignInManager<AppUser> SignInManager

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - aspnet_realestate</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/aspnet_realestate.styles.css" asp-append-version="true" />

    <script src="~/js/tailwind.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body class="inter">
    <div class="flex flex-col min-h-screen">
        <header class="bg-white">
            <div class="w-full px-4">
                <div class="flex items-center justify-between h-16">


                    <div class="max-w-[400px] w-full">
                        <a asp-controller="Public" asp-action="Index" class="text-2xl font-bold text-gray-800 decoration-none inline-flex items-center gap-x-2">
                            <img src="https://getbootstrap.com/docs/5.3/assets/brand/bootstrap-logo.svg" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
                            Logo
                        </a>
                    </div>

                    <nav>
                        <ul class="flex items-center justify-center gap-x-6">
                            @{
                                // Mevcut Action ismini alıyoruz (Index, Properties, ForRent vb.)
                                var currentAction = ViewContext.RouteData.Values["action"]?.ToString();

                                // Aktiflik kontrolü yapan küçük bir fonksiyon
                                string IsActive(string actionName)
                                {
                                    return currentAction == actionName ? "text-blue-600 font-bold" : "text-gray-800";
                                }
                            }

                            <li class="nav-item">
                                <a asp-controller="Public" asp-action="Properties"
                                   class="@IsActive("Properties") hover:text-blue-600 decoration-none px-[14px] py-[7px]">
                                    Tüm İlanlar
                                </a>
                            </li>

                            <li class="nav-item">
                                <a asp-controller="Public" asp-action="ForSale"
                                   class="@IsActive("ForSale") hover:text-blue-600 decoration-none px-[14px] py-[7px]">
                                    Satılık
                                </a>
                            </li>
                            <li class="nav-item">
                                <a asp-controller="Public" asp-action="ForRent"
                                   class="@IsActive("ForRent") hover:text-blue-600 decoration-none px-[14px] py-[7px]">
                                    Kiralık
                                </a>
                            </li>

                        </ul>
                    </nav>

                    <div>
                        <ul class="flex items-center space-x-1 max-w-[400px] w-full justify-end">
                            @if (SignInManager.IsSignedIn(User))
                            {
                                @* OTURUM AÇILMIŞSA *@
                                <li class="nav-item">
                                    @if (User.IsInRole("Admin"))
                                    {
                                        <a asp-controller="Admin" asp-action="Index" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 fw-bold shadow-sm transition-all">
                                            Yönetim Paneli
                                        </a>
                                    }
                                    else
                                    {
                                        <a asp-controller="User" asp-action="Index" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 fw-bold shadow-sm transition-all">
                                            Hesabım
                                        </a>
                                    }
                                </li>
                                <li class="nav-item ps-2">
                                    <a asp-controller="Public" asp-action="Logout" class="text-secondary small hover:text-red-500 transition-all">
                                        <i class="bi bi-box-arrow-right"></i> Çıkış
                                    </a>
                                </li>
                            }
                            else
                            {
                                @* OTURUM AÇILMAMIŞSA *@
                                <li class="nav-item">
                                    <a asp-controller="Public" asp-action="Login" class="px-4 py-2 text-blue-500 hover:text-blue-700 transition-all">Giriş Yap</a>
                                </li>
                                <li class="nav-item">
                                    <a asp-controller="Public" asp-action="Register" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-all shadow-sm">Ücretsiz Kayıt Ol</a>
                                </li>
                            }
                        </ul>


                    </div>
                </div>
            </div>
        </header>

        <div class="flex-grow container">
            <main role="main" class="pb-3 flex flex-col">
                @RenderBody()
            </main>
        </div>

        <footer>

            <!-- Alt Bölüm -->
            <div class="bg-neutral-800 text-neutral-400 text-xs px-6 py-6">
                <div class="max-w-screen-xl mx-auto text-center">
                    &copy; 2025 RealEstate. Tüm içerik, yazılım ve video ile ilgili telif hakları Ayberk Dönmez A.Ş.’ye aittir.
                    Kullanıcıların sağladığı ilan, görsel ve içeriklerin doğruluğu ve güvenliği yalnızca içerikleri sağlayan kullanıcıya aittir.
                </div>
            </div>
        </footer>
    </div>
    




    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
